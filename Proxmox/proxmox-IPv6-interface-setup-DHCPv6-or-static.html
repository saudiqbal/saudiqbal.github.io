<!DOCTYPE html>
<html lang="en">
<head>
<title>Proxmox IPv6 interface setup DHCPv6 or static</title>
<meta name="keywords" content="Proxmox, IPv6, interface, setup, DHCPv6 ,static">
<meta name="description" content="Proxmox IPv6 interface setup DHCPv6 or static">
<meta name="viewport" content="user-scalable=yes, initial-scale=1, width=device-width">
<link rel="stylesheet" type="text/css" href="/css/styles.css">
<link rel="stylesheet" type="text/css" href="/css/codeblock.css">
</head>
<body>
<div class="header">
<span class="headerlogo">saudiqbal.github.io</span>
<input class="menu-btn" type="checkbox" id="menu-btn" />
<label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
<ul class="menu">
<li><a href="/">Home</a></li>
<li><a href="https://www.saudiqbal.com/contact-me.php">Send Feedback</a></li>
</ul>
</div>
<div class="content">
<h1 class="titletextshadow">Proxmox IPv6 interface setup DHCPv6 or static</h1>
<article>
<p>Proxmox host setup instructions for setting up IPv6 using DHCPv6 or static configuration. This configuration example also allows the default port 8006 on 443 so that you can directly access your Proxmox server without typing :8006 in the end. Iptable example for Proxmox IP addresses are fd00::10 and 192.168.1.10 for allowing direct Proxmox access on port 443.</p>
<p style="font-weight: bold;">Static config</p>
<p>Proxmox bridge example with static IPv6 and IPv4, change the IPs accordingly.</p>
<maincode>
<figure>
<figcaption>/etc/network/interfaces</figcaption>
<pre>
<code contenteditable="false" tabindex="0" spellcheck="false"># network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface eno1 inet manual

auto vmbr0
iface vmbr0 inet static
	address 192.168.1.10/24
	gateway 192.168.1.1
	bridge-ports eno1
	bridge-stp off
	bridge-fd 0
	post-up iptables -t nat -A PREROUTING -p tcp -d 192.168.1.10 --dport 443 -j REDIRECT --to-ports 8006

iface vmbr0 inet6 static
	address fd00::10/64
	gateway fd00::1
	accept_ra 2
	post-up ip6tables -t nat -A PREROUTING -p tcp -d fd00::10 --dport 443 -j REDIRECT --to-ports 8006</code></pre>
</figure>
</maincode>
<p style="font-weight: bold;">DHCP config</p>
<p>Proxmox bridge example with DHCPv6 for IPv6 and DHCPv4 for IPv4, change the IPs accordingly.</p>
<maincode>
<figure>
<figcaption>/etc/network/interfaces</figcaption>
<pre>
<code contenteditable="false" tabindex="0" spellcheck="false"># network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface eno1 inet manual

auto vmbr0
allow-hotplug vmbr0
iface vmbr0 inet dhcp
	gateway 192.168.1.1
	bridge-ports eno1
	bridge-stp off
	bridge-fd 0
	post-up iptables -t nat -A PREROUTING -p tcp -d 192.168.1.10 --dport 443 -j REDIRECT --to-ports 8006


iface vmbr0 inet6 dhcp
	gateway fd00::1
	accept_ra 2
	post-up ip6tables -t nat -A PREROUTING -p tcp -d fd00::10 --dport 443 -j REDIRECT --to-ports 8006</code></pre>
</figure>
</maincode>
<p>Now edit the file <span class="customcode">/etc/default/networking</span> and comment out <span class="customcode">SKIP_DOWN_AT_SYSRESET="yes"</span> by changing it to <span class="customcode">#SKIP_DOWN_AT_SYSRESET="yes"</span></p>
<p>Then run these commands in the Proxmox terminal <span class="customcode">systemctl restart networking</span></p>
<p>Finally don't forget to add <span class="customcode">net.ipv6.conf.vmbr0.accept_ra=2</span> to your <span class="customcode">/etc/sysctl.conf</span> file and reboot ProxMox.</p>
<p><span>Let me know if you have any comments or if there is any error in this guide.</span></p>
</article>

<div class="footer">
<div style="margin: 0 auto; padding:25px;">
<a href="https://github.com/saudiqbal" style="text-decoration: none;color: #000;">https://github.com/saudiqbal</a>
</div>
</div>
</div>
<script src="/js/codeblock.js"></script>
<script>
setTimeout(() => {
var protocol = 'https://';
var domain = 'saudiqbal.com';
var file = '/si-visitor.php?url=';
var url = window.location.href;
var and = "&referrer=";
var referrer = document.referrer;
var address = protocol+domain+file+url+and+referrer;
var xmlhttp;
if (window.XMLHttpRequest) {
xmlhttp=new XMLHttpRequest();
}
else {
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET",address,true);
xmlhttp.send();
}, 1000)
</script>
</body>
</html>